<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<meta name="description" content="Container images for hardware description and Electronic Design Automation">
<meta name="author" content="Unai Martinez-Corral and contributors">
<link rel="icon" type="image/png" href="../img/icon.png">
<title>HDL Containers: Development</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>HDL Containers: Development</h1>
<div class="details">
<span id="author" class="author">Unai Martinez-Corral and contributors</span><br>
<span id="email" class="email"><a href="https://github.com/umarcor">@GitHub</a> <a href="https://gitlab.com/umarcor">@GitLab</a> <a href="https://twitter.com/unaimarcor">@Twitter</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">HDLC: Development</div>
<ul class="sectlevel1">
<li><a href="#_contributing">Contributing</a>
<ul class="sectlevel2">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_graphs">Graphs</a></li>
<li><a href="#_package_images">Package images</a></li>
<li><a href="#_utils">Utils</a>
<ul class="sectlevel3">
<li><a href="#_build">Build</a></li>
<li><a href="#_inspect">Inspect</a></li>
<li><a href="#_test">Test</a></li>
</ul>
</li>
<li><a href="#_step_by_step_checklist">Step by step checklist</a></li>
</ul>
</li>
<li><a href="#_continuous_integration_ci">Continuous Integration (CI)</a></li>
<li><a href="#_tasks">Tasks</a></li>
<li><a href="#_graph_generationparsing">Graph generation/parsing</a>
<ul class="sectlevel2">
<li><a href="#_reading_dockerfiles">Reading dockerfiles</a></li>
<li><a href="#_reading_github_actions_workflow_files">Reading GitHub Actions workflow files</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph text-center">
<p><a href="https://github.com/hdl/containers"><span class="image"><img src="https://img.shields.io/badge/hdl-containers-f2f1ef.svg?longCache=true&amp;style=flat-square&amp;logo=GitHub&amp;logoColor=f2f1ef" alt="hdl containers f2f1ef" title="hdl/containers GitHub repository"></span></a>
<a href="https://github.com/hdl/containers/blob/master/LICENSE"><span class="image"><img src="https://img.shields.io/github/license/hdl/containers?longCache=true&amp;style=flat-square" alt="containers?longCache=true&amp;style=flat square" title="license"></span></a>
<a href="https://gitter.im/hdl/community"><span class="image"><img src="https://img.shields.io/gitter/room/hdl/community.svg?longCache=true&amp;style=flat-square&amp;logo=gitter&amp;logoColor=fff&amp;color=4db797" alt="community" title="hdl/community on gitter.im"></span></a>
<a href="../index.html"><span class="image"><img src="https://img.shields.io/badge/documentation-HTML-f2f1ef?longCache=true&amp;style=flat-square&amp;logo=asciidoctor" alt="documentation HTML f2f1ef?longCache=true&amp;style=flat square&amp;logo=asciidoctor" title="Documentation (html)"></span></a>
<a href="../ug/index.html"><span class="image"><img src="https://img.shields.io/badge/user%20guide-HTML-f2f1ef?longCache=true&amp;style=flat-square&amp;logo=asciidoctor" alt="user%20guide HTML f2f1ef?longCache=true&amp;style=flat square&amp;logo=asciidoctor" title="User Guide (html)"></span></a></p>
</div>
<div class="paragraph text-center">
<p><a href="https://github.com/hdl/packages"><span class="image"><img src="https://img.shields.io/badge/hdl-packages-f2f1ef.svg?longCache=true&amp;style=flat-square&amp;logo=GitHub&amp;logoColor=f2f1ef" alt="hdl packages f2f1ef" title="hdl/packages GitHub repository"></span></a>
<a href="https://github.com/hdl/awesome"><span class="image"><img src="https://img.shields.io/badge/hdl-awesome-f2f1ef.svg?longCache=true&amp;style=flat-square&amp;logo=GitHub&amp;logoColor=f2f1ef" alt="hdl awesome f2f1ef" title="hdl/awesome GitHub repository"></span></a>
<a href="https://github.com/hdl/constraints"><span class="image"><img src="https://img.shields.io/badge/hdl-constraints-f2f1ef.svg?longCache=true&amp;style=flat-square&amp;logo=GitHub&amp;logoColor=f2f1ef" alt="hdl constraints f2f1ef" title="hdl/constraints GitHub repository"></span></a>
<a href="https://github.com/hdl/smoke-tests"><span class="image"><img src="https://img.shields.io/badge/hdl-smoke&#8212;&#8203;tests-f2f1ef.svg?longCache=true&amp;style=flat-square&amp;logo=GitHub&amp;logoColor=f2f1ef" alt="hdl smoke&#8212;&#8203;tests f2f1ef" title="hdl/smoke-tests GitHub repository"></span></a></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Do you want to improve this page? <a href="https://github.com/hdl/containers/edit/main/doc/index.adoc">Edit it on GitHub</a>!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributing">Contributing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction">Introduction</h3>
<div class="paragraph">
<p>As explained in <a href="../index.html#_tools_and_images">Tools and images</a> and in the <a href="../ug/index.html">User Guide</a>,
multiple collections of images are provided.
For each collection, a set of base images is provided, which are to be used for building and for runtime.
These are defined in <code>base.dockerfile</code>.
See, for instance, <a href="https://github.com/hdl/containers/tree/main/debian-buster/base.dockerfile"><code>debian-buster/base.dockerfile</code></a>.
All the images in the ecosystem are based on these:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://gcr.io/hdl-containers/debian/buster/build/base"><span class="image"><img src="https://img.shields.io/docker/image-size/hdlc/build/base?longCache=true&style=flat-square&label=build/base&logo=Docker&logoColor=fff" alt="base&logo=Docker&logoColor=fff" title="build/base container image size"></span></a> Debian Buster or CentOS 7, with updated <code>ca-certificates</code>, <code>curl</code> and Python 3.</p>
</li>
<li>
<p><a href="https://gcr.io/hdl-containers/debian/buster/build/build"><span class="image"><img src="https://img.shields.io/docker/image-size/hdlc/build/build?longCache=true&style=flat-square&label=build/build&logo=Docker&logoColor=fff" alt="build&logo=Docker&logoColor=fff" title="build/build container image size"></span></a> based on <code>base</code>, includes <code>clang</code> and <code>make</code>.</p>
</li>
<li>
<p><a href="https://gcr.io/hdl-containers/debian/buster/build/dev"><span class="image"><img src="https://img.shields.io/docker/image-size/hdlc/build/dev?longCache=true&style=flat-square&label=build/dev&logo=Docker&logoColor=fff" alt="dev&logo=Docker&logoColor=fff" title="build/dev container image size"></span></a> based on <code>build</code>, includes <code>cmake</code>, <code>libboost-all-dev</code> and <code>python3-dev</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then, for each project/tool there are dockerfiles (one for each collection), a GitHub Actions workflow, and one or more
test scripts.
Those are used for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tools are built using <code>&lt;REGISTRY_PREFIX&gt;/build</code> images.</p>
</li>
<li>
<p>Package images based on <code>scratch</code> (and/or other reusable packages) are produced.</p>
</li>
<li>
<p>Ready-to-use images based on the runtime base image (<code>&lt;REGISTRY_PREFIX&gt;/build/base</code>) are produced.</p>
</li>
<li>
<p>Ready-to-use images are tested before uploading.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In some dockerfiles/workflows, <a href="#_package_images">Package images</a> are created too.
Those are based on <code>scratch</code> and contain pre-built assets.
Therefore, they are not really useful <em>per se</em>, but meant to be used for building other.
In fact, multiple tools are merged into ready-to-use images for common use cases (such as <code>&lt;REGISTRY_PREFIX&gt;/impl</code>,
<code>&lt;REGISTRY_PREFIX&gt;/formal</code> or <code>&lt;REGISTRY_PREFIX&gt;/prog</code>).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before working on adding or extending the support for a tool, please check the <a href="https://github.com/hdl/containers/issues">issues</a>
and <a href="https://github.com/hdl/containers/pulls">pull requests</a>; <a href="https://github.com/hdl/containers/issues/new">open an issue</a>
or <a href="https://gitter.im/hdl/community">let us know through the chat</a>.
Due to its distributed nature, someone might be working on that already!</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently, many projects don&#8217;t use containers at all, hence, all images are generated in this repository.
However, the workload is expected to be distributed between multiple projects in the ecosystem.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_graphs">Graphs</h3>
<div class="paragraph">
<p>Understanding how all the pieces in this project fit together might be daunting for newcomers. Fortunately, there is a map for helping maintainers and contributors traveling through the ecosystem. Subdir <a href="https://github.com/hdl/containers/tree/main/graph/"><code>graph/</code></a> contains the sources of <a href="https://en.wikipedia.org/wiki/Directed_graph">directed graphs</a>, where the relations between workflows, dockerfiles, images and tests are shown.</p>
</div>
<div class="paragraph">
<p>(<a href="https://graphviz.org/">Graphviz</a>)'s <code>digraph</code> format is used, hence, graphs can be rendered to multiple image formats. The SVG output is shown in <a href="#img-graph">Figure 1</a> describes which images are created in each map. See the details in the figure corresponding to the name of the subgraph: Base (<a href="#img-graph-base">Figure 2</a>), Sim (<a href="#img-graph-sim">Figure 3</a>), Synth (<a href="#img-graph-synth">Figure 4</a>), Impl (<a href="#img-graph-impl">Figure 5</a>), Formal (<a href="#img-graph-formal">Figure 6</a>) and , ASIC (<a href="#img-graph-asic">Figure 7</a>). Multiple colours and arrow types are used for describing different dependency types. All of those are explained in the legend: <a href="#img-graph-legend">Figure 8</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
These graphs represent a single collection of images (the <em>virtual</em> aggregation of others). In practice, some tools might be missing in some collections. For instance, a tool might be available in Debian Buster based containers, but not in CentOS 7. That info is not tracked in the graphs yet. Please, see whether a dockerfile exists in the corresponding subdir.
</td>
</tr>
</table>
</div>
<div id="img-graph" class="imageblock text-center">
<div class="content">
<a class="image" href="../img/graph.svg"><img src="../img/graph.svg" alt="Diagram" width="6619" height="586"></a>
</div>
<div class="title">Figure 1. Subgraphs and images.</div>
</div>
<div id="img-graph-base" class="imageblock text-center">
<div class="content">
<a class="image" href="../img/base.svg"><img src="../img/base.svg" alt="Diagram" width="476" height="654"></a>
</div>
<div class="title">Figure 2. Base: workflows, dockerfiles, images and tests.</div>
</div>
<div id="img-graph-sim" class="imageblock text-center">
<div class="content">
<a class="image" href="../img/sim.svg"><img src="../img/sim.svg" alt="Diagram" width="2186" height="1133"></a>
</div>
<div class="title">Figure 3. Sim: workflows, dockerfiles, images and tests.</div>
</div>
<div id="img-graph-synth" class="imageblock text-center">
<div class="content">
<a class="image" href="../img/synth.svg"><img src="../img/synth.svg" alt="Diagram" width="1502" height="750"></a>
</div>
<div class="title">Figure 4. Synth: workflows, dockerfiles, images and tests.</div>
</div>
<div id="img-graph-impl" class="imageblock text-center">
<div class="content">
<a class="image" href="../img/impl.svg"><img src="../img/impl.svg" alt="Diagram" width="4454" height="1228"></a>
</div>
<div class="title">Figure 5. Impl: workflows, dockerfiles, images and tests.</div>
</div>
<div id="img-graph-formal" class="imageblock text-center">
<div class="content">
<a class="image" href="../img/formal.svg"><img src="../img/formal.svg" alt="Diagram" width="3146" height="941"></a>
</div>
<div class="title">Figure 6. Formal: workflows, dockerfiles, images and tests.</div>
</div>
<div id="img-graph-asic" class="imageblock text-center">
<div class="content">
<a class="image" href="../img/asic.svg"><img src="../img/asic.svg" alt="Diagram" width="853" height="462"></a>
</div>
<div class="title">Figure 7. ASIC: workflows, dockerfiles, images and tests.</div>
</div>
<div id="img-graph-legend" class="imageblock text-center">
<div class="content">
<a class="image" href="../img/legend.svg"><img src="../img/legend.svg" alt="Diagram" width="702" height="537"></a>
</div>
<div class="title">Figure 8. Legend of the directed graph.</div>
</div>
</div>
<div class="sect2">
<h3 id="_package_images">Package images</h3>
<div class="paragraph">
<p>Each EDA tool/project is built once only for each collection in this image/container ecosystem. However, some (many) of the tools need to be included in multiple images for different purposes. Moreover, it is desirable to keep build recipes separated, in order to better understand the dependencies of each tool/project. Therefore, <code>&lt;REGISTRY_PREFIX&gt;/pkg/</code> images are created/used (coloured <span class="blue">BLUE</span> in the <a href="#_graphs">Graphs</a>). These are all based on <code>scratch</code> and are not runnable. Instead, they contain pre-built artifacts, to be then added into other images through <code>COPY --from=</code>.</p>
</div>
<div class="paragraph">
<p>Since <code>&lt;REGISTRY_PREFIX&gt;/pkg/</code> images are not runnable <em>per se</em>, but an intermediate utility, the usage of environment variables <code>PREFIX</code> and <code>DESTDIR</code> in the dockerfiles might be misleading. All the tools in the ecosystem are expected to be installed into <code>/usr/local</code>, the standard location for user built tools on most GNU/Linux distributions. Hence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PREFIX</code> should typically not need to be modified. Most of the tools will default to <code>PREFIX=/usr/local</code>, which is correct. Yet, some tools might default to <code>/</code> or <code>/usr</code>. In those cases, setting it explicitly is required.</p>
</li>
<li>
<p><code>DESTDIR</code> must be set to an empty location when calling <code>make install</code> or when copying the artifacts otherhow. The content of the corresponding package images is taken from that empty location. Therefore, if <code>DESTDIR</code> was unset, the artifacts of the tool might potentially be mixed with other existing assets in <code>/usr/local</code>. In most of the dockerfiles, <code>/opt/TOOL_NAME</code> is used as the temporary empty location.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Despite the usage of these variables being documented in <a href="https://www.gnu.org/prep/standards/html_node/index.html">GNU Coding Standards</a>, <code>DESTDIR</code> seems not to be very used, except by packagers. As a result, contributors might need to patch the build scripts upstream. Sometimes <code>DESTDIR</code> is not supported at all, or it is supported but some lines in the makefiles are missing it. Do not hesitate to reach for help through the issues or the chat!</p>
</div>
</div>
<div class="sect2">
<h3 id="_utils">Utils</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Some helper shell and Python utilities are available in <a href="https://github.com/hdl/containers/tree/main/utils/bin"><code>utils/bin</code></a> and
<a href="https://github.com/hdl/containers/tree/main/utils/pyHDLC"><code>utils/pyHDLC</code></a>, respectively.
A <a href="https://github.com/hdl/containers/tree/main/utils/setup.sh"><code>utils/setup.sh</code></a> script is provided for installing Python dependencies and adding the
<code>bin</code> subdir to the <code>PATH</code>.
Since <code>pip</code> is used for installing <a href="https://github.com/hdl/containers/tree/main/utils/pyHDLC/requirements.txt"><code>utils/pyHDLC/requirements.txt</code></a>,
it is desirable to create a virtual environment (<a href="https://docs.python.org/3/library/venv.html">docs.python.org/3/library/venv</a>)
before running <code>setup.sh</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">virtualenv venv
source venv/bin/activate
./utils/setup.sh</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_build">Build</h4>
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/tree/main/utils/bin/dockerBuild"><code>dockerBuild</code></a> helps building one or multiple images at once, by hiding
all common options.
It&#8217;s a wrapper around command <code>build</code> of <a href="https://github.com/hdl/containers/tree/main/utils/pyHDLC/cli.py"><code>pyHDLC.cli</code></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">usage: cli.py build [-h] [-c COLLECTION] [-r REGISTRY] [-f DOCKERFILE] [-t TARGET] [-a ARGIMG] [-p] [-d] Image [Image ...]

positional arguments:
  Image                 image name(s), without registry prefix.

optional arguments:
  -h, --help            show this help message and exit
  -c COLLECTION, --collection COLLECTION
                        name of the collection/subset of images.
                        (default: debian/buster)
  -r REGISTRY, --registry REGISTRY
                        container image registry prefix.
                        (default: gcr.io/hdl-containers)
  -f DOCKERFILE, --dockerfile DOCKERFILE
                        dockerfile to be built, from the collection.
                        (default: None)
  -t TARGET, --target TARGET
                        target stage in the dockerfile.
                        (default: None)
  -a ARGIMG, --argimg ARGIMG
                        base image passed as an ARG to the dockerfile.
                        (default: None)
  -p, --pkg             preprend 'pkg/' to Image and set Target to 'pkg' (if unset).
                        (default: False)
  -d, --default         set default Dockerfile, Target and ArgImg options, given the image name(s).
                        (default: False)</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<code>DOCKERFILE</code> defaults to <code>Image</code> if <code>None</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_inspect">Inspect</h4>
<div class="paragraph">
<p>All ready-to-use images (coloured <span class="green">GREEN</span> or <span class="maroon">BROWN</span> in the <a href="#_graphs">Graphs</a>) are runnable.
Therefore, users/contributors can run containers and test the tools interactively or through scripting.
However, since <code>&lt;REGISTRY_PREFIX&gt;/pkg</code> images are not runnable, creating another image is required in order to inspect
their content from a container. For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dockerfile" data-lang="dockerfile">FROM busybox
COPY --from=&lt;REGISTRY_PREFIX&gt;/pkg/TOOL_NAME /TOOL_NAME /</code></pre>
</div>
</div>
<div class="paragraph">
<p>In fact, <a href="https://github.com/hdl/containers/tree/main/utils/bin/dockerTestPkg"><code>dockerTestPkg</code></a> uses a similar dockerfile for running <code>.pkg.sh</code> scripts from <a href="https://github.com/hdl/containers/tree/main/test/"><code>test/</code></a>. See <a href="#_test">Test</a>.</p>
</div>
<div class="paragraph">
<p>Alternatively, or as a complement, <a href="https://github.com/wagoodman/dive">wagoodman/dive</a> is a lightweight tool with a nice
terminal based GUI for exploring layers and contents of container images.
It can be downloaded as a tarball/zipfile, or used as a container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">docker run --rm -it \
  -v //var/run/docker.sock://var/run/docker.sock \
  wagoodman/dive \
  &lt;REGISTRY_PREFIX&gt;/IMAGE[:TAG]</code></pre>
</div>
</div>
<div id="img-dive" class="imageblock text-center">
<div class="content">
<a class="image" href="img/dive.png"><img src="../img/dive.png" alt="wagoodman/dive"></a>
</div>
<div class="title">Figure 9. Inspection of <code>&lt;REGISTRY_PREFIX&gt;/pkg/yosys</code> with <a href="https://github.com/wagoodman/dive">wagoodman/dive</a>.</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/tree/main/utils/bin/dockerDive"><code>dockerDive</code></a> is a wrapper around the wagoodman/dive container, which supports one
or two arguments for specifying the image to be inspected.
The default registry prefix is <code>gcr.io/hdl-containers</code>, however, it can be overriden through envvar <code>HDL_REGISTRY</code>.</p>
</div>
<div class="paragraph">
<p>For instance, inspect image <code>gcr.io/hdl-containers/debian/buster/ghdl</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dockerDive debian/buster ghdl</code></pre>
</div>
</div>
<div class="paragraph">
<p>or, inspect any image from any registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">HDL_REGISTRY=docker.io dockerDive python:slim-buster</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_test">Test</h4>
<div class="paragraph">
<p>There is a test script in <a href="https://github.com/hdl/containers/tree/main/test/"><code>test/</code></a> for each image in this ecosystem, according to the following convention:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Scripts for package images, <code>&lt;REGISTRY_PREFIX&gt;/pkg/TOOL_NAME</code>, are named <code>TOOL_NAME.pkg.sh</code>.</p>
</li>
<li>
<p>Scripts for other images, <code>&lt;REGISTRY_PREFIX&gt;/NAME[:TAG]</code>, are named <code>NAME[--TAG].sh</code>.</p>
</li>
<li>
<p>Other helper scripts are named <code>_*.sh</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore, <a href="https://github.com/hdl/smoke-tests">hdl/smoke-test</a> is a submodule of this repository (<a href="https://github.com/hdl/containers/tree/main/test/"><code>test/smoke-test</code></a>). Smoke-tests contains fine grained tests that cover the most important functionalities of the tools. Those are used in other packaging projects too. Therefore, container tests are expected to execute the smoke-tests corresponding to the tools available in the image, before executing more specific tests.</p>
</div>
<div class="paragraph">
<p>There are a couple of helper scripts in <a href="https://github.com/hdl/containers/tree/main/utils/bin/"><code>utils/bin/</code></a>, for testing the images. Those are used in CI but can be useful locally too:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dockerTest BASE_OS IMAGE_NAME [SCRIPT_NAME]</code></p>
<div class="ulist">
<ul>
<li>
<p>BASE_OS: set/collection of images (e.g. <code>debian/buster</code>).</p>
</li>
<li>
<p>IMAGE_NAME: image name without the prefix.</p>
</li>
<li>
<p>(optional) SCRIPT_NAME: name of the test script, only required if it does not match <code>echo IMAGE_NAME | sed 's#:#--#'</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>dockerTestPkg BASE_OS TAG_NAME [DIR_NAME]</code></p>
<div class="ulist">
<ul>
<li>
<p>BASE_OS: set/collection of images (e.g. <code>debian/buster</code>).</p>
</li>
<li>
<p>TAG_NAME: tag name (i.e. image name without <code>&lt;REGISTRY_PREFIX&gt;/pkg/</code> prefix).</p>
</li>
<li>
<p>(optional) DIR_NAME: directory name inside the package image which needs to be copied to the temporary image for testing.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_by_step_checklist">Step by step checklist</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create or update dockerfile(s).</p>
<div class="ulist">
<ul>
<li>
<p>For each tool and collection, a <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a> recipe exists.</p>
<div class="ulist">
<ul>
<li>
<p>It is recommended, but not required, to add tools to multiple collections at the same time. That is, to create one dockerfile for each collection. Nevertheless, it is possible to add a tool to just one or to a limited set of collections.</p>
</li>
<li>
<p>All dockerfiles must use, at least, two stages.</p>
<div class="ulist">
<ul>
<li>
<p>One stage, named <code>build</code>, is to be based on <code>&lt;REGISTRY_PREFIX&gt;/build/base</code> or <code>&lt;REGISTRY_PREFIX&gt;/build/build</code> or <code>&lt;REGISTRY_PREFIX&gt;/build/dev</code>. In this first stage, you need to add the missing build dependencies. Then, build the tool/project using the standard <code>PREFIX</code>, but install to a custom location using <code>DESTDIR</code>. See <a href="#_package_images">Package images</a>.</p>
</li>
<li>
<p>If the tool/project is to be used standalone, create an stage based on <code>&lt;REGISTRY_PREFIX&gt;/build/base</code>. Install runtime dependencies only.</p>
</li>
<li>
<p>If the tool/project is to be packaged, create an stage based on <code>scratch</code>.</p>
</li>
<li>
<p>In any case, copy the tool artifacts from the build stage using <code>COPY --from=STAGE_NAME</code>.</p>
</li>
<li>
<p>In practice, several dockerfiles produce at least one package image and one ready-to-use image. Therefore, dockerfiles will likely have more than two stages.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Some tools are to be added to existing images which include several tools (coloured <span class="maroon">BROWN</span> in the <a href="#_graphs">Graphs</a>). After creating the dockerfile where the corresponding package image is defined, add <code>COPY --from=&lt;REGISTRY_PREFIX&gt;/pkg/TOOL_NAME</code> statements to the dockerfiles of multi-tool images.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Build and test the dockerfile(s) locally. Use helper scripts from <a href="https://github.com/hdl/containers/tree/main/.github/bin"><code>.github/bin</code></a> as explained in <a href="#_build">Build</a> and <a href="#_test">Test</a>.</p>
<div class="ulist">
<ul>
<li>
<p>If a new tool was added, or a new image is to be generated, a test script needs to be added to <a href="https://github.com/hdl/containers/tree/main/test/"><code>test/</code></a>. See <a href="#_test">Test</a> for naming guidelines.</p>
</li>
<li>
<p>Be careful with the order. If you add a new tool and include it in one of the multi-tool images, the package image needs to be built first.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Create or update workflow(s).</p>
<div class="ulist">
<ul>
<li>
<p>For each tool or multi-tool image, a GitHub Actions workflow is added to <a href="https://github.com/hdl/containers/tree/main/.github/workflows"><code>.github/workflows/</code></a>. Find documentation at <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions">Workflow syntax for GitHub Actions</a>. Copying some of the existing workflows in this repo and adapting it is suggested.</p>
</li>
<li>
<p>In each workflow, all the images produced from stages of the corresponding dockerfile are built, tested and pushed. Scripts from <a href="https://github.com/hdl/containers/tree/main/.github/bin"><code>.github/bin</code></a> are used.</p>
</li>
<li>
<p>The workflow matrix is used for deciding which collections is each tool to be built for.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Update the documentation.</p>
<div class="ulist">
<ul>
<li>
<p>If a new tool was added,</p>
<div class="ulist">
<ul>
<li>
<p>Ensure that the tool is listed at <a href="https://github.com/hdl/awesome">hdl/awesome</a>, since that&#8217;s where all the tool/projects in the table point to.</p>
</li>
<li>
<p>If a tool from the <em>To Do</em> list was added, remove it from the list.</p>
</li>
<li>
<p>Add a shield/badge to the table in <a href="#_continuous_integration_ci">Continuous Integration (CI)</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Edit <a href="https://github.com/hdl/containers/tree/main/doc/tools.yaml"><code>doc/tools.yaml</code></a>. The table in <a href="../index.html#_tools_and_images">Tools and images</a> is autogenerated from that YAML file, using <a href="https://github.com/hdl/containers/tree/main/doc/gen_tool_table.py"><code>doc/gen_tool_table.py</code></a></p>
</li>
<li>
<p>Update the <a href="#_graphs">Graphs</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_continuous_integration_ci">Continuous Integration (CI)</h2>
<div class="sectionbody">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:doc"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/doc/main?longCache=true&style=flat-square&label=doc&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=doc&logo=GitHub%20Actions&logoColor=fff" title="'doc' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:base"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/base/main?longCache=true&style=flat-square&label=base&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=base&logo=GitHub%20Actions&logoColor=fff" title="'base' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:ghdl"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/ghdl/main?longCache=true&style=flat-square&label=ghdl&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=ghdl&logo=GitHub%20Actions&logoColor=fff" title="'ghdl' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:gtkwave"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/gtkwave/main?longCache=true&style=flat-square&label=gtkwave&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=gtkwave&logo=GitHub%20Actions&logoColor=fff" title="'gtkwave' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:verilator"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/verilator/main?longCache=true&style=flat-square&label=verilator&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=verilator&logo=GitHub%20Actions&logoColor=fff" title="'verilator' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:xyce"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/xyce/main?longCache=true&style=flat-square&label=xyce&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=xyce&logo=GitHub%20Actions&logoColor=fff" title="'xyce' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:apicula"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/apicula/main?longCache=true&style=flat-square&label=apicula&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=apicula&logo=GitHub%20Actions&logoColor=fff" title="'apicula' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:ghdl-yosys-plugin"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/ghdl-yosys-plugin/main?longCache=true&style=flat-square&label=ghdl-yosys-plugin&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=ghdl yosys plugin&logo=GitHub%20Actions&logoColor=fff" title="'ghdl-yosys-plugin' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:icestorm"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/icestorm/main?longCache=true&style=flat-square&label=icestorm&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=icestorm&logo=GitHub%20Actions&logoColor=fff" title="'icestorm' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:prjtrellis"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/prjtrellis/main?longCache=true&style=flat-square&label=prjtrellis&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=prjtrellis&logo=GitHub%20Actions&logoColor=fff" title="'prjtrellis' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:yosys"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/yosys/main?longCache=true&style=flat-square&label=yosys&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=yosys&logo=GitHub%20Actions&logoColor=fff" title="'yosys' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:nextpnr"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/nextpnr/main?longCache=true&style=flat-square&label=nextpnr&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=nextpnr&logo=GitHub%20Actions&logoColor=fff" title="'nextpnr' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:arachne-pnr"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/arachne-pnr/main?longCache=true&style=flat-square&label=arachne-pnr&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=arachne pnr&logo=GitHub%20Actions&logoColor=fff" title="'arachne-pnr' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:openfpgaloader"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/openfpgaloader/main?longCache=true&style=flat-square&label=openfpgaloader&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=openfpgaloader&logo=GitHub%20Actions&logoColor=fff" title="'openfpgaloader' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:boolector"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/boolector/main?longCache=true&style=flat-square&label=boolector&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=boolector&logo=GitHub%20Actions&logoColor=fff" title="'boolector' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:cvc"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/cvc/main?longCache=true&style=flat-square&label=cvc&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=cvc&logo=GitHub%20Actions&logoColor=fff" title="'cvc' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:pono"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/pono/main?longCache=true&style=flat-square&label=pono&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=pono&logo=GitHub%20Actions&logoColor=fff" title="'pono' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:superprove"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/superprove/main?longCache=true&style=flat-square&label=superprove&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=superprove&logo=GitHub%20Actions&logoColor=fff" title="'superprove' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:symbiyosys"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/symbiyosys/main?longCache=true&style=flat-square&label=symbiyosys&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=symbiyosys&logo=GitHub%20Actions&logoColor=fff" title="'symbiyosys' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:yices2"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/yices2/main?longCache=true&style=flat-square&label=yices2&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=yices2&logo=GitHub%20Actions&logoColor=fff" title="'yices2' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:z3"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/z3/main?longCache=true&style=flat-square&label=z3&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=z3&logo=GitHub%20Actions&logoColor=fff" title="'z3' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:klayout"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/klayout/main?longCache=true&style=flat-square&label=klayout&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=klayout&logo=GitHub%20Actions&logoColor=fff" title="'klayout' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:magic"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/magic/main?longCache=true&style=flat-square&label=magic&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=magic&logo=GitHub%20Actions&logoColor=fff" title="'magic' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:formal"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/formal/main?longCache=true&style=flat-square&label=formal&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=formal&logo=GitHub%20Actions&logoColor=fff" title="'formal' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:sim"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/sim/main?longCache=true&style=flat-square&label=sim&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=sim&logo=GitHub%20Actions&logoColor=fff" title="'sim' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:impl"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/impl/main?longCache=true&style=flat-square&label=impl&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=impl&logo=GitHub%20Actions&logoColor=fff" title="'impl' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/hdl/containers/actions?query=workflow:prog"><span class="image"><img src="https://img.shields.io/github/workflow/status/hdl/containers/prog/main?longCache=true&style=flat-square&label=prog&logo=GitHub%20Actions&logoColor=fff" alt="main?longCache=true&style=flat square&label=prog&logo=GitHub%20Actions&logoColor=fff" title="'prog' workflow Status"></span></a></p>
</div>
</div>
</div>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
At the moment, there is no triggering mechanism set up between different GitHub repositories.
All the workflows in this repo are triggered by push events, CRON jobs, or manually.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tasks">Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The strategical priorities are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the missing ASIC tools to collection <code>debian/buster</code>.
Following the order in <a href="https://github.com/efabless/openlane#openlane-design-stages">efabless/openlane: OpenLANE Design Stages</a>
is suggested.</p>
</li>
<li>
<p>Add the missing tools to collection <code>centos/7</code>.
This collection is currently empty (it contains the base dockerfile only).
It was added because OpenLane containers are based on <code>centos:7`</code>, but may be updated to <code>centos:8</code>.
Moreover, some DARPA users might be constrained to <code>centos:6</code>.
We should confirm that.</p>
</li>
<li>
<p>Setup cross-triggering between CI workflows.
Currently, all workflows are triggered at the same time.
That produces some races and some tools are built twice in the same run (<a href="https://github.com/moby/buildkit/issues/1930">moby/buildkit#1930</a>).
That is not critical because we do know how to solve it (<a href="https://github.com/hdl/containers/tree/main/.github/trigger.sh"><code>.github/trigger.sh</code></a>).
We didn&#8217;t implement it yet because we&#8217;d like it to be automatically sychronised with the graphs (see <a href="#_graph_generationparsing">Graph generation/parsing</a>).</p>
</li>
<li>
<p>Coordinate with Antmicro/SymbiFlow for using self-hosted runners provided by Google and their orchestration plumbing.</p>
</li>
<li>
<p>Enhance the (atomic) <a href="https://github.com/hdl/smoke-tests">smoke-tests</a>, which are currently placeholders mostly.</p>
</li>
<li>
<p>Provide multiarch images (at least, add arm32v7 and arm64v8 variants).
See <a href="https://github.com/dbhi/qus">dbhi/qus</a> and <a href="https://www.docker.com/blog/multi-arch-build-and-images-the-simple-way/">Multi-arch build and images, the simple way</a>.</p>
</li>
<li>
<p>Versioning.
Currently, images are not versioned explicitly.
Images are only pushed when builds and tests are successful.
Users which cannot afford breaking changes can use the image by digest, instead of doing it by name.
However, we should probably leverage manifests for publishing some <em>versioned ecosystems</em>, impliying that we run a full
test suite on an specific group of images and we then tag them all together as a <em>nicely behaving family/release</em>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These are all in no particular order, although most of them are closely related to each other.
It you want to tackle any of them, <a href="https://github.com/hdl/containers/issues/new">let us know</a> or
<a href="https://gitter.im/hdl/community">join the chat</a>!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_graph_generationparsing">Graph generation/parsing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Currently, the <a href="#_graphs">Graphs</a> are updated manually.
That is error prone, because the information shown in them is also defined in the dockerfiles and CI workflows.
Ideally, graphs would be auto-generated by parsing/analysing those.
However, the complexity of the graphs is non trivial.
There are many tools for automatically generating diagrams from large datasets, but not so many with features for
visualizing complex hierarchical nets.
The requirements we are willing to satisfy are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open source tool and format(s).</p>
</li>
<li>
<p>Generates diagrams programmatically from a text representation and/or through a Python or Golang API.</p>
</li>
<li>
<p>Supports hierarchical DAGs with multiple levels of hierarchy. I.e. (nested) clusters which are nodes and have ports.</p>
</li>
<li>
<p>Generates SVG of the hierarchical DAGs.</p>
</li>
<li>
<p>Supports node styles (shape and colour).</p>
</li>
<li>
<p>Ideally:</p>
<div class="ulist">
<ul>
<li>
<p>Clusters are collapsible when shown in an HTML site.</p>
</li>
<li>
<p>Text in the nodes can be links to web sites.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>So far, the following options were analysed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://graphviz.org/">Graphviz</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/windler/dotgraph">windler/dotgraph</a></p>
</li>
<li>
<p><a href="http://blockdiag.com/en/blockdiag/examples.html">blockdiag</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://gephi.org/">Gephi</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/gephi/gephi/issues/1594">gephi/gephi#1594</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://aafigure.readthedocs.io/en/latest/shortintro.html">aafigure</a></p>
</li>
<li>
<p><a href="https://draw.io">draw.io</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/jgraph/mxgraph">jgraph/mxgraph</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://www.yworks.com/products/yed">yEd</a></p>
</li>
<li>
<p><a href="https://texample.net/tikz/">texample.net/tikz</a></p>
</li>
<li>
<p><a href="https://github.com/ajstarks/svgo">ajstarks/svgo</a></p>
</li>
<li>
<p><a href="https://github.com/kieler/elkjs">kieler/elkjs</a> (<a href="https://github.com/Nic30/d3-hwschematic">Nic30/d3-hwschematic</a>, <a href="https://github.com/nturley/netlistsvg">nturley/netlistsvg</a>)</p>
</li>
<li>
<p><a href="https://github.com/dagrejs/dagre-d3/wiki">dagrejs/dagre-d3</a></p>
</li>
<li>
<p><a href="https://graphdracula.net">graphdracula.net</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Graphviz and Gephi are probably the most known tools for generating all kinds of diagrams.
Unfortunately, none of them supports hierarchical clusters as required in this use case.
The same issue applies to aafigure and graphdracula.</p>
</div>
<div class="paragraph">
<p>yEd is a very interesting product, and fits most (if not all) the technical constraints.
However, it&#8217;s not open source.
The editor is freeware and the SDK is paid.
For programmatic generation, the SDK is required.
The draw.io/mxgraph toolkit seems to be the most similar open source solution.
However, using SDKs for building custom interactive diagraming tools feels overkill in this use case.
We don&#8217;t need graphs to be editable through a GUI!</p>
</div>
<div class="paragraph">
<p>Similarly, Tikz and SVG generation libraries (such as svgo) can be used for having the work done, but they require
writing a non-negligible plumbing which would increase the maintenance burden, instead of reducing it.
This would be a last resort.</p>
</div>
<div class="paragraph">
<p>Although d3-hwschematic and netlistsvg are very different use cases, the JSON format used in elkjs might be suitable.</p>
</div>
<div class="paragraph">
<p>dagre-d3 is meant for DAGs and it supports nested clusters (experimentally,
<a href="https://dagrejs.github.io/project/dagre-d3/latest/demo/clusters.html">Dagre D3 Demo: Clusters</a>).
Although clusters seem not to have ports, it might be an easy update from the current solution.
Since it&#8217;s a client-side JS library, it does not write an SVG file to disk by default, but achieving it should be
trivial.</p>
</div>
<div class="paragraph">
<p>As a result, it seems that the most suitable solution might be using the JSON format from elkjs, either with elkjs or
with dagre-d3.
Yet, generating an SVG programmatically seems not to be as straightforward as using other solutions such as Graphviz&#8217;s
<code>dot</code>.
The following references illustrate advanced features for building custom views/GUIs/editors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/kieler/elkjs">kieler/elkjs</a></p>
</li>
<li>
<p><a href="https://www.eclipse.org/elk/documentation/tooldevelopers/graphdatastructure/jsonformat.html">eclipse.org/elk/documentation: JSON format</a></p>
</li>
<li>
<p><a href="https://rtsys.informatik.uni-kiel.de/elklive/index.html">rtsys.informatik.uni-kiel.de/elklive</a></p>
</li>
<li>
<p><a href="https://rtsys.informatik.uni-kiel.de/elklive/elkgraph.html">rtsys.informatik.uni-kiel.de/elklive/elkgraph</a></p>
</li>
<li>
<p><a href="https://github.com/eclipse/sprotty">eclipse/sprotty</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, it seems that writing a JSON is cumbersome.
On the one hand, some nodes need to have a size for them to be shown.
On the other hand, it seems not possible to draw edges across hierarchies.
Port need to be explicitly defined for that purpose.
Therefore, the complexity of generating the JSON given a set of nodes, edges and clusters is non-trivial.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Branch <a href="https://github.com/hdl/containers/tree/pymap/utils/pyHDLC/map.py">utils/pyHDLC/map.py@pymap</a> contains work in progress.
First, <code>GenerateMap</code> builds a DAG by parsing the dockerfiles.
Then, <code>report</code> prints the content in the terminal, for debugging purposes.
Last, <code>dotgraph</code> generates a Graphviz dot diagram.
The dot diagram does not have clusters.
We want to add those by parsing the GitHub Actions workflows (see below).
However, we want to first reproduce the dot output using elkjs.
See function <code>elkjsgraph</code> in <a href="https://github.com/hdl/containers/tree/pymap/utils/pyHDLC/map.py">utils/pyHDLC/map.py@pymap</a>.
Do you want to give it a try? <a href="https://github.com/hdl/containers/issues/new">Let us know</a> or <a href="https://gitter.im/hdl/community">join the chat</a>!</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_reading_dockerfiles">Reading dockerfiles</h3>
<div class="paragraph">
<p>One of the two sources of information for the graph are dockerfiles.
As far as we are aware, there is no tool for generating a DAG from the stages of a dockerfile.
However, <a href="https://github.com/asottile/dockerfile">asottile/dockerfile</a> is an interesting Python module which wraps
docker/moby&#8217;s golang parser.
Hence, it can be used for getting the stages and <code>COPY --from</code> or <code>--mount</code> statements for generating the hierarchy.
See <a href="https://github.com/hdl/containers/tree/main/utils/pyHDLC/map.py"><code>utils/pyHDLC/map.py</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reading_github_actions_workflow_files">Reading GitHub Actions workflow files</h3>
<div class="paragraph">
<p>The second source of information are CI workflow files.
Since YAML is used, reading it from any language is trivial, however, semantic analysis needs to be done.
Particularly, variables from <code>matrix</code> need to be expanded/replaced.
<a href="https://github.com/nektos/act">nektos/act</a> is written in golang, and it allows executing GitHub Actions workflows
locally.
Therefore, it might have the required features.
However, as far as we are aware, it&#8217;s not meant to be used as a library.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>